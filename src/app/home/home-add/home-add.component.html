<mat-card class="example-card">
    <mat-card-header>
        <mat-card-title>{{pageTitle}}</mat-card-title>
    </mat-card-header>
    <div class="example-container">
        <div class="form-container">
            <form novalidate (ngSubmit)="save()" [formGroup]="houseForm">
                <mat-card-content>

                    <mat-form-field class="form-field" appearance="outline">
                        <mat-label> House No.
                        </mat-label>
                        <input matInput formControlName="houseNumber" type="number"
                            placeholder="House number(required)">
                        <mat-error *ngIf="(houseForm.get('houseNumber').touched || houseForm.get('houseNumber').dirty)&& 
                                !houseForm.get('houseNumber').valid">
                            <span *ngIf="houseForm.get('houseNumber').errors?.required">
                                Please enter your house number.
                            </span>
                            <span *ngIf="houseForm.get('houseNumber').errors?.pattern">
                                Please enter numbers.
                            </span>
                        </mat-error>
                    </mat-form-field>

                    <mat-form-field class="form-field" appearance="outline">
                        <mat-label> House Address
                        </mat-label>
                        <input matInput formControlName="houseAddress" placeholder="House address(required)">
                        <mat-error *ngIf="(houseForm.get('houseAddress').touched || houseForm.get('houseAddress').dirty)&& 
                                !houseForm.get('houseAddress').valid">
                            <span *ngIf="houseForm.get('houseAddress').errors?.required">
                                Please enter your houseAddress.
                            </span>
                            <span *ngIf="houseForm.get('houseAddress').errors?.minlength">
                                The address must be longer than 5 characters.
                            </span>
                            <span *ngIf="houseForm.get('houseAddress').errors?.maxlength">
                                The address must be shorter than 40 characters.
                            </span>
                        </mat-error>
                    </mat-form-field>

                    <div formArrayName="members" *ngFor="let member of membersFormArray.controls; let i = index;">
                        <div [formGroupName]="i">
                            <mat-form-field class="form-field" appearance="outline">
                                <mat-label attr.for="{{ 'name' + i }}"> Name 
                                </mat-label>
                                <input matInput formControlName="name" id="{{ 'name' + i }}" type="text"
                                    placeholder="Name(required)">
                                <mat-error *ngIf="(member.controls.name.touched || member.controls.name.dirty)&& 
                                !member.controls.name.valid">
                                    <span *ngIf="member.controls.name.errors?.required">
                                        Please enter the name.
                                    </span>
                                    <span *ngIf="member.controls.name.errors?.minlength">
                                        The name must be longer than 3 characters.
                                    </span>
                                    <span *ngIf="member.controls.name.errors?.maxlength">
                                        The name must be shorter than 32 characters.
                                    </span>
                                </mat-error>
                            </mat-form-field>

                            <div class="form-group row mb-2">
                             <label class="col-md-2 col-form-label pt-0">Gender</label> 
                                <div class="col-md-8">
                                    <div class="form-check form-check-inline">
                                        <label class="form-check-label">
                                            <input class="form-check-input" type="radio" value="male"
                                                formControlName="gender">Male
                                        </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <label class="form-check-label">
                                            <input class="form-check-input" type="radio" value="female"
                                                formControlName="gender">Female
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <mat-form-field  class="age"  appearance="outline">
                                <mat-label attr.for="{{ 'age' + i }}"> Age
                                </mat-label>
                                <input matInput formControlName="age" id="{{ 'age' + i }}" type="number"
                                    placeholder="Age(required)">
                                <mat-error *ngIf="(member.controls.age.touched || member.controls.age.dirty)&& 
                                !member.controls.age.valid">
                                    <span *ngIf="member.controls.age.errors?.required">
                                        Please enter your Age.
                                    </span>
                                    <span *ngIf="member.controls.age.errors?.pattern">
                                        Please enter numbers.
                                    </span>
                                </mat-error>
                            </mat-form-field>
                            <div *ngIf="(membersFormArray.length!=1)" class="same">
                                <button mat-raised-button type="button" color="warn" title="Delete this member"
                                    (click)="deleteMember(i)">Delete Member
                                </button>
                            </div>
                        </div>
                    </div>
                </mat-card-content>


                <mat-card-actions>

                    <button mat-raised-button color="primary" type="button" [disabled]="!membersFormArray.valid"
                        (click)="addMember()">
                        Add Another Member
                    </button>
                    <p></p>
                    <button mat-raised-button color="accent" type="submit" title="save" [disabled]="!houseForm.valid">
                        Save
                    </button>
                    <button mat-raised-button color="accent" type="button" title="Cancel your edits"
                        [routerLink]="['/home']">
                        Cancel
                    </button>
                    <button mat-raised-button color="warn" type="button" title="Delete this house"
                        (click)="deleteHome()">
                        Delete
                    </button>

                </mat-card-actions>

            </form>
        </div>
    </div>
</mat-card>